var ComicList=function(){var a,b=[],c=function(){e()},d=function(){var d=$("#buscador").val().toUpperCase();if(d.length>3)for(var e=0;e<b.length;e++){var f=new RegExp(b[e]),g=d.match(f);if(void 0!=g){var h='<button class="comicButton" id='+g[0].toLowerCase()+">"+g[0].substr(0,1).toUpperCase()+g[0].substr(1).toLowerCase()+"</button>";$(".panel-list").html(h),i(g[0].toLowerCase(),a)}}else c()},e=function(){var a=$.ajax({url:"/tests/comicList.json",type:"GET",contentType:!1,processData:!1,cache:!1});a.done(function(a){f(a)}),a.fail(function(a){console.log(a)})},f=function(c){$(".panel-list").html(""),a=c.comicList;for(var d=0;d<9;d++)h(a[d],a),b.push(a[d].title.toUpperCase());a.length>9&&($("#verMas").html('<button class="comicButton"  style="font-size: 2em;" id="viewMore">Ver mas..</button>'),ComicList.viewMore())},g=function(){var c=9;$("#viewMore").click(function(){for(var d=c;d<c+6;d++)h(a[d],a),b.push(a[d].title.toUpperCase()),a.length<=c+6&&$("#viewMore").hide();c+=6})},h=function(a,b){var c='<button class="comicButton" id='+a.title.toLowerCase()+">"+a.title+"</button>";$(".panel-list").append(c),i(a.title.toLowerCase(),b)},i=function(a,b){var c=document.getElementById(a);$(c).click(function(){$("#editView").hide(),$("#commentsComic").html("");for(var c=0;c<b.length;c++)if(a===b[c].title.toLowerCase()){$("#titleComic").html(b[c].title),$("#descriptionComic").html(b[c].description),$("#titleEdit").val(b[c].title),$("#descriptionEdit").val(b[c].description),$("#editComic").click(function(){$("#detailComic").hide(),$("#editView").show(1500)});for(var d=0;d<b[c].comments.length;d++)$("#commentsComic").append("<p>"+b[c].comments[d]+"</p>")}$("#detailComic").show(1500)})},j=function(){"admin"===localStorage.getItem("userNameStorage")&&"admin"===localStorage.getItem("passStorage")?c():window.open("index.html","_self")};return{viewMore:g,verifyUser:j,init:c,searchBar:d,showDetails:i}}(),LogIn=function(){var a=function(){var a=$("#userName").val(),c=$("#pass").val();localStorage.setItem("userNameStorage",a),localStorage.setItem("passStorage",c);var d=JSON.stringify({userName:a,pass:c});if(b(d),"admin"!=localStorage.getItem("userNameStorage")&&"admin"!=localStorage.getItem("passStorage"))alert("El nombre y contraseña no coinciden con ningun usuario. Intenta nuevamente");else{window.open("listaComics.html","_self")}},b=function(a){$.ajax({url:"0.0.0.0",type:"POST",data:a,contentType:"application/json",success:function(a){}})},c=function(){$("#submitLog").click(function(){a()})};return{initButton:c}}(),logOut=function(){localStorage.clear()},RegisterComic=function(){var a=function(){var a=($("#title").val(),$("#genere").val()),b=$("#author").val(),c=$("#description").val(),d=JSON.stringify({tittle:tittle,genere:a,author:b,description:c});return console.log("Json enviado al back: "+d),d},b=function(){$.ajax({url:"0.0.0.0",type:"POST",data:a,contentType:"application/json",success:function(a){alert("Comic Ingresado")}})},c=function(){$("#submitComic").click(function(){b()})},d=function(){"admin"===localStorage.getItem("userNameStorage")&&"admin"===localStorage.getItem("passStorage")?c():window.open("index.html","_self")};return{verifyUser:d}}(),jsonOut,RegisterEmployee=function(){var a=function(){var a=$("#nameEmp").val(),c=$("#lastEmp").val(),d=$("#idNumber").val(),e=$("#mail").val(),f=$("#pass").val(),g=$("#passConfirm").val();jsonOut=JSON.stringify({name:a,lastName:c,idNumber:d,mail:e,pass:f}),f===g?b(e):alert("Las contaseñas no coinciden")},b=function(a){var b=/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;b.test(a)?d():alert("correo no valido!")},c=function(a){$.ajax({url:"0.0.0.0",type:"POST",data:a,contentType:"application/json",success:function(a){alert("Comic Ingresado")}})},d=function(){var a=!0,b=$("#pass").val();b.length<8?(a=!1,alert("la contraseña debe contenert almenos 8 caracteres")):b.length>20?(a=!1,alert("la contraseña debe contenert maximo 20 caracteres")):b.search(/[a-zA-Z]/)===-1?(a=!1,alert("La contraseña debe contener almenos una mayuscula")):b.search(/[`!%$&^*()]+/)===-1?(a=!1,alert("La contraseña debe contener almenos un caracter especial")):b.match(/\d+/g)[0].length<2?(a=!1,alert("La contraseña debe contener almenos dos numeros")):(a=!0)&&(c(jsonOut),alert("registro existoso"))},e=function(){$("#submitRegister").click(function(){a()})},f=function(){"admin"===localStorage.getItem("userNameStorage")&&"admin"===localStorage.getItem("passStorage")?e():window.open("index.html","_self")};return{verifyUser:f}}();